# Compiler and flags
CC = g++
# CFLAGS = -I./ConsoleUI -g  # Include the ConsoleUI folder for headers
CFLAGS = -g -O0 -Wall -Wextra 
# CFLAGS = -g -O0 -Wall -Wextra -fsanitize=thread 
# CFLAGS =  -g

# File locations
CONSOLE_SOURCE = ConsoleUI/ConsoleUI.cpp ConsoleUI/AConsoleUI/AConsoleUI.cpp ConsoleUI/ProcessUI/ProcessUI.cpp ConsoleUI/MainMenuUI/MainMenuUI.cpp
PROCESS_SOURCE= Process/Process.cpp Process/Instruction/Instruction.cpp Process/Instruction/Add.cpp Process/Instruction/Declare.cpp Process/Instruction/Print.cpp Process/Instruction/Sub.cpp
SCHEDULER_SOURCE = Scheduler/Scheduler.cpp
DISPATCHER_SOURCE = Scheduler/Dispatcher/Dispatcher.cpp
MEMORY_SOURCE = Memory/MemoryManager.cpp Memory/Allocator/AAllocator.cpp Memory/Allocator/FlatAllocator.cpp Memory/Allocator/PagingAllocator.cpp
SOURCES = main.cpp Clock/Clock.cpp $(SCHEDULER_SOURCE) $(MEMORY_SOURCE) $(DISPATCHER_SOURCE) $(PROCESS_SOURCE) $(CONSOLE_SOURCE) Config/config.cpp  CPU/CPU.cpp

OBJECTS = $(SOURCES:.cpp=.o)
EXEC = main # Name of the output executable

# Default target to compile and link
# $(EXEC): $(OBJECTS)
# 	$(CC) $(OBJECTS) -o $(EXEC)

# For use with fsanitize
$(EXEC): $(OBJECTS)
	$(CC) $(CFLAGS) $(OBJECTS) -o $(EXEC)

# Rule to compile each .cpp file to .o object files
%.o: %.cpp
	$(CC) $(CFLAGS) -c $< -o $@


# Clean up generated OBject files and executable
clean:
	rm -f $(OBJECTS) $(EXEC)
